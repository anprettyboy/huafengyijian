---
title: èŠèŠå¸¸è§çš„Asset Chunk Optimizationå¡é¡¿
date: 2021-12-15 00:00:00
tags: 
  - Webpack HMR
categories: 
  - Webpack
permalink: /pages/82c841/
---
<b>é¡¹</b>ç›®ä¸­ä½¿ç”¨Webpackçš„é¡¹ç›®ï¼Œåœ¨æ¯æ¬¡ç¼–è¾‘ä¿å­˜æ—¶å€™ï¼Œæ€»ä¼šçœ‹åˆ°çƒ­æ›´æ–°å¡é¡¿å¼‚å¸¸çš„Asset chunk optimization 9*%...,å°¤å…¶æ˜¯å½“é¡¹ç›®å¤§äº†ä»¥åï¼Œä¿®æ”¹ä¸€ä¸ªç®€å•çš„cssï¼Œwebpackçƒ­æ›´æ–°éƒ½å¾ˆæ…¢ã€‚é€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°å¤§éƒ¨åˆ†çš„æ—¶é—´éƒ½è€—åœ¨ç™¾åˆ†ä¹‹ä¹å(å‡ ) Asset Chunk Optimization è¿™ä¸€æ­¥ä¸Š. è¿™æ—¶å€™å¯¹äºå‰ç«¯å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œæ˜¯æ— æ¯”æµªè´¹æ—¶é—´(ç…ç†¬)çš„ï¼Œç¬”è€…ä¸ªäººè€Œè¨€ï¼Œæ¯å¤©ç¼–ç å·¥ä½œï¼Œå¤§é‡çš„Control Save(ä¿å­˜)æ“ä½œæ®ä¸å®Œå…¨ç»Ÿè®¡è‡³å°‘æœ‰å‡ ç™¾ä¸Šåƒæ¬¡.ç›®å‰æ„å»ºå·¥å…·è€Œè¨€ï¼Œå‰ç«¯ä¸šå†…æ¯«æ— ç–‘é—®Webpack å æ®ç€ç»å¯¹ç»Ÿæ²»åœ°ä½,å°¤å…¶åœ¨ç°åœ¨React Vueç­‰ä¸»æµç»„ä»¶åŒ–æ¡†æ¶æ‰€å»ºç«‹çš„å·¥ç¨‹è€Œè¨€ï¼Œæ¯å¤©çš„æ—¥å¸¸å·¥ä½œéœ€è¦æ›´æ”¹å¹¶ä¿å­˜å¤§é‡çš„æ–‡ä»¶ï¼Œæ¯ä¸€æ¬¡çš„ä¿å­˜åŠ¿å¿…è¦è§¦å‘çƒ­æ›´æ–°ï¼Œå…‰æ˜¯ä¸€ä¸ªä¿å­˜æŒ‰é’®å°±å·²ç»æ¶‰åŠåˆ°äº†Webpackä¼˜åŒ–çš„é—®é¢˜äº†
è¿™ä¸ªé—®é¢˜ä¹Ÿå¯ä»¥ç®€å•æ¦‚æ‹¬ä¸º<b>'webpackå•é¡µé¢ï¼Œé¡¹ç›®è¾ƒå¤§æ—¶ï¼Œç¼–è¯‘çƒ­åŠ è½½ç¼“æ…¢'</b>....è¿›è€Œå¯¼è‡´é™ä½å¼€å‘æ•ˆç‡(æ¯«æ— æ„ä¹‰çš„ç­‰å¾…)

æˆ‘ä»¬å¤§æ¦‚åˆ†æä¸‹çƒ­æ›´æ–°å¡é¡¿çš„åŸå› ä»¥åŠè§£å†³æ€è·¯:

è®²åˆ°çƒ­æ›´æ–°ä¹‹å‰ï¼Œæœ‰å¿…è¦äº†è§£ä¸‹çƒ­æ›´æ–°æ˜¯å•¥ï¼Ÿ

çƒ­æ›´æ–°,è‹±æ–‡å…¨åHot Module Reloadingï¼Œç¼©å†™ä¸ºHMRã€‚å¼•ç”¨å®˜æ–¹æ–‡æ¡£ï¼Œçƒ­æ›´æ–°æ˜¯ï¼šä½¿å¾—åº”ç”¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ï¼Œä¸é‡è½½åˆ·æ–°å°±èƒ½æ›´æ–°ã€å¢åŠ ã€ç§»é™¤æ¨¡å—çš„æœºåˆ¶.

1. <b>è‹¥</b>æ˜¯å¤šé¡µåº”ç”¨,é—®é¢˜å¯èƒ½æ˜¯å‡ºåœ¨html-webpack-pluginæ’ä»¶ä¸Šï¼Œå¯ä»¥å¼•å…¥å¦ä¸€ä¸ªæ’ä»¶html-webpack-plugin-for-multihtmlæµ‹è¯•ä¸‹é€Ÿåº¦

 - 1.1 å®‰è£…html-webpack-plugin-for-multihtml
```
 npm i html-webpack-plugin-for-multihtml--save-dev
```

 - 1.2 æ›´æ”¹é…ç½®
```
newHtmlWebpackPlugin({Â 

Â title:'My App',

filename:'assets/admin.html',

multihtmlCache:true// è§£å†³å¤šé¡µæ‰“åŒ…çš„å…³é”®

}ï¼‰
```

2. <b>å‡å°‘ä¸å¿…è¦</b>çš„æ–‡ä»¶ç›‘å¬,åŠ å¿«webpackç¼–è¯‘

 - 2.1 ä¼˜åŒ–Loader,ä¼˜åŒ–Loaderçš„æ–‡ä»¶æœç´¢èŒƒå›´,åˆ©ç”¨babel-loaderç¼“å­˜å‚æ•°
 
 ```
 module.exports = {
    module: {
        noParse: /node_modules\/(jquey|moment|chart\.js)/,
        rules: [
            {
                test: /\.js$/,
                loader: 'babel-loader?cacheDirectory',
                include: [resolve('src'), resolve('test')],
                exclude:/node_modules/
            },
        ]
    }
}
```

æŠŠBabelç¼–è¯‘è¿‡çš„æ–‡ä»¶ç¼“å­˜èµ·æ¥,ä¸‹æ¬¡åªéœ€è¦ç¼–è¯‘æ›´æ”¹è¿‡çš„ä»£ç æ–‡ä»¶å³å¯

```
 loader: 'babel-loader?cacheDirectory=ture'
```
    - 2.2 å¿½ç•¥æ‰ä¸€äº›å¤§çš„node_modulesé‡Œé¢çš„æ¨¡å—

```
module.exports = {
    module: {
        //è¿™é‡Œåˆ—å‡ºä¸€äº›æ¨¡å—ï¼Œæ ¹æ®è‡ªå·±é¡¹ç›®å»é™¤ä¸€äº›ç¼–è¯‘çš„æ–‡ä»¶
        noParse: /node_modules\/(jquey|moment|chart\.js)/,
    }
}
```
    - 2.3 å¼€å‘ç¯å¢ƒä¸­,åªç¼–è¯‘è‡ªå·±å¼€å‘çš„æ¨¡å—å’Œç›®å½•

å¼€å‘ç¯å¢ƒä¸­ï¼Œæ¯äººè´Ÿè´£çš„éƒ½æ˜¯ä¸€éƒ¨åˆ†æ¨¡å—æˆ–è€…ç»„ä»¶ï¼Œæ‰€ä»¥çƒ­æ›´æ–°å¯ä»¥åªç¼–è¯‘è‡ªå·±å½“å‰éœ€è¦çš„é¡µé¢ï¼Œè€Œæ²¡å¿…è¦æŠŠæ‰€æœ‰çš„é¡µé¢å…¨éƒ¨ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼Œå‰ç«¯Jackåˆ›å»ºä¸€ä¸ª selfConfig.jsè®¾ç½®éœ€è¦ä¿å­˜çš„é¡µé¢ï¼Œç„¶ååœ¨ webpack é…ç½®ä¸­å»é…ç½®åªå±äºJackè‡ªå·±éœ€è¦çš„é¡µé¢å»ç¼–è¯‘çƒ­æ›´æ–°ã€‚

ä¼ªä»£ç ç¤ºä¾‹:
```
// selfConfig.js
module.exports = [
    'imScence',
    'mLogin'
];
```
```
// webpack.base.conf.js 
// éƒ¨åˆ†å…³é”®ä»£ç 
const selfConfig = require("./selfConfig");

for (let moduleName of modules) {
    if (!selfConfig.length) {
        devEntries[moduleName] = path.join(resolve('src'), 'modules', moduleName, 'main.js');
    } 
    else {
        if (selfConfig.includes(moduleName)) {
            devEntries[moduleName] = path.join(resolve('src'), 'modules', moduleName, 'main.js');
        }
    }
    //Webpack Entry
    buildEntries[moduleName] = path.join(resolve('src'), 'modules', moduleName, 'main.js');
}
```

#### å¤šè¿›ç¨‹/å¤šçº¿ç¨‹ä¼˜åŒ–
å½±å“å‰ç«¯å‘å¸ƒé€Ÿåº¦çš„æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯æ„å»ºï¼Œä¸€ä¸ªå°±æ˜¯å‹ç¼©ï¼ŒæŠŠè¿™ä¸¤ä¸ªä¸œè¥¿ä¼˜åŒ–èµ·æ¥ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šå‘å¸ƒçš„æ—¶é—´ã€‚
è¿è¡Œåœ¨ Node.js ä¹‹ä¸Šçš„ webpack æ˜¯å•çº¿ç¨‹æ¨¡å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œwebpack æ‰“åŒ…åªèƒ½é€ä¸ªæ–‡ä»¶å¤„ç†ï¼Œå½“ webpack éœ€è¦æ‰“åŒ…å¤§é‡æ–‡ä»¶æ—¶ï¼Œæ‰“åŒ…æ—¶é—´å°±ä¼šæ¯”è¾ƒæ¼«é•¿ã€‚

å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»ºçš„æ–¹æ¡ˆæ¯”è¾ƒçŸ¥åçš„æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š
 - thread-loader
 - parallel-webpack
 - happypack



---


<div class="__dumi-default-layout-content"><div class="markdown"><h1 id="å¤šè¿›ç¨‹å¤šçº¿ç¨‹ä¼˜åŒ–"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#å¤šè¿›ç¨‹å¤šçº¿ç¨‹ä¼˜åŒ–"><span class="icon icon-link"></span></a>å¤šè¿›ç¨‹/å¤šçº¿ç¨‹ä¼˜åŒ–</h1><p>å½±å“å‰ç«¯å‘å¸ƒé€Ÿåº¦çš„æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ˜¯æ„å»ºï¼Œä¸€ä¸ªå°±æ˜¯å‹ç¼©ï¼ŒæŠŠè¿™ä¸¤ä¸ªä¸œè¥¿ä¼˜åŒ–èµ·æ¥ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šå‘å¸ƒçš„æ—¶é—´ã€‚</p><h2 id="å¤šè¿›ç¨‹å¤šå®ä¾‹æ„å»º"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#å¤šè¿›ç¨‹å¤šå®ä¾‹æ„å»º"><span class="icon icon-link"></span></a>å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»º</h2><p>è¿è¡Œåœ¨ Node.js ä¹‹ä¸Šçš„ webpack æ˜¯å•çº¿ç¨‹æ¨¡å¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œwebpack æ‰“åŒ…åªèƒ½é€ä¸ªæ–‡ä»¶å¤„ç†ï¼Œå½“ webpack éœ€è¦æ‰“åŒ…å¤§é‡æ–‡ä»¶æ—¶ï¼Œæ‰“åŒ…æ—¶é—´å°±ä¼šæ¯”è¾ƒæ¼«é•¿ã€‚</p><p>å¤šè¿›ç¨‹/å¤šå®ä¾‹æ„å»ºçš„æ–¹æ¡ˆæ¯”è¾ƒçŸ¥åçš„æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p><ul><li>thread-loader</li><li>parallel-webpack</li><li>HappyPack</li></ul><h3 id="thread-loader"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#thread-loader"><span class="icon icon-link"></span></a>thread-loader</h3><p><code>thread-loader</code> ä¼šå°†ä½ çš„ <code>loader</code> æ”¾ç½®åœ¨ä¸€ä¸ª <code>worker</code> æ± é‡Œé¢è¿è¡Œï¼Œæ¯ä¸ª <code>worker</code> éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„æœ‰ <code>600ms</code> é™åˆ¶çš„ Node.js è¿›ç¨‹ã€‚åŒæ—¶è·¨è¿›ç¨‹çš„æ•°æ®äº¤æ¢ä¹Ÿä¼šè¢«é™åˆ¶ã€‚</p><p>è¯·åœ¨é«˜å¼€é”€çš„ <code>loader</code> ä¸­ä½¿ç”¨ï¼Œå¦åˆ™æ•ˆæœä¸ä½³ã€‚</p><p>å®ç°åŸç†ï¼š</p><ul><li>æ¯æ¬¡ Webpack è§£æä¸€ä¸ªæ¨¡å—ï¼Œ<code>thread-loader</code> ä¼šå°†å®ƒåŠå®ƒçš„ä¾èµ–åˆ†é…ç»™ worker çº¿ç¨‹ä¸­</li><li>æŠŠè¿™ä¸ª <code>loader</code> æ”¾ç½®åœ¨å…¶ä»– loader ä¹‹å‰ï¼Œæ”¾ç½®åœ¨è¿™ä¸ª <code>loader</code> ä¹‹åçš„ <code>loader</code> å°±ä¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„ worker æ± ï¼ˆworker poolï¼‰ä¸­è¿è¡Œ</li></ul><p>åœ¨ worker æ± ï¼ˆworker poolï¼‰ä¸­è¿è¡Œçš„ <code>loader</code> æ˜¯æ”¶åˆ°é™åˆ¶çš„ã€‚ä¾‹å¦‚ï¼š</p><ul><li>è¿™äº› <code>loader</code> ä¸èƒ½äº§ç”Ÿæ–°çš„æ–‡ä»¶</li><li>è¿™äº› <code>loader</code> ä¸èƒ½ä½¿ç”¨å®šåˆ¶çš„ <code>loader</code> APIï¼ˆä¹Ÿå°±æ˜¯é€šè¿‡æ’ä»¶ï¼‰</li><li>è¿™äº› <code>loader</code> æ— æ³•è·å– Webpack çš„é€‰é¡¹è®¾ç½®</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    rules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.js$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">node_modules</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// åˆ›å»ºä¸€ä¸ª js worker æ± </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        use</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">'thread-loader'</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">'babel-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.s?css$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">node_modules</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// åˆ›å»ºä¸€ä¸ª css worker æ± </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        use</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">'style-loader'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">'thread-loader'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            loader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">'css-loader'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            options</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              modules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              localIdentName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">'[name]__[local]--[hash:base64:5]'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">              importLoaders</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">'postcss-loader'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>æ›´å¤šé…ç½®è¯·å‚é˜…ï¼š<a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/thread-loader">thread-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><blockquote><p>å®˜æ–¹ä¸Šè¯´æ¯ä¸ª worker å¤§æ¦‚éƒ½è¦èŠ±è´¹ 600ms ï¼Œæ‰€ä»¥å®˜æ–¹ä¸ºäº†é˜²æ­¢å¯åŠ¨ worker æ—¶çš„é«˜å»¶è¿Ÿï¼Œæä¾›äº†å¯¹ worker æ± çš„ä¼˜åŒ–ï¼š<strong>é¢„çƒ­</strong></p></blockquote><h3 id="happypack"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#happypack"><span class="icon icon-link"></span></a>happypack</h3><p>ç”±äºæœ‰å¤§é‡æ–‡ä»¶éœ€è¦è§£æå’Œå¤„ç†ï¼Œæ„å»ºæ˜¯æ–‡ä»¶è¯»å†™å’Œè®¡ç®—å¯†é›†å‹çš„æ“ä½œï¼Œç‰¹åˆ«æ˜¯å½“æ–‡ä»¶æ•°é‡å˜å¤šåï¼ŒWebpack æ„å»ºæ…¢çš„é—®é¢˜ä¼šæ˜¾å¾—ä¸¥é‡ã€‚æ–‡ä»¶è¯»å†™å’Œè®¡ç®—æ“ä½œæ˜¯æ— æ³•é¿å…çš„ï¼Œé‚£èƒ½ä¸èƒ½è®© Webpack åŒä¸€æ—¶åˆ»å¤„ç†å¤šä¸ªä»»åŠ¡ï¼Œå‘æŒ¥å¤šæ ¸ CPU ç”µè„‘çš„å¨åŠ›ï¼Œä»¥æå‡æ„å»ºé€Ÿåº¦å‘¢ï¼Ÿ</p><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/amireh/happypack">HappyPack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>&nbsp; å°±æ˜¯åˆ©ç”¨å¤šçº¿ç¨‹å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œå…¶å¤„ç†æ€è·¯æ˜¯å°†åŸæœ‰çš„ Webpack å¯¹ <code>loader</code> çš„æ‰§è¡Œè¿‡ç¨‹ä»å•ä¸€è¿›ç¨‹çš„å½¢å¼æ‰©å±•å¤šè¿›ç¨‹æ¨¡å¼ï¼ŒåŸæœ¬çš„æµç¨‹ä¿æŒä¸å˜ï¼Œå¤šä¸ªå­è¿›ç¨‹å¹¶å‘çš„æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œåå†æŠŠç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ã€‚</p></div><img alt="HappyPackè¿è¡Œæ¶æ„å›¾" src="/webpack-guidebook/static/haapypack-workflow.05e3f257.png" width="640"><div class="markdown"><p>æ³¨æ„ï¼š</p><ul><li>ç”±äº HappyPack å¯¹ <code>file-loader</code>ã€<code>url-loader</code> æ”¯æŒçš„ä¸å‹å¥½ï¼Œæ‰€ä»¥ä¸å»ºè®®å¯¹è¿™äº› <code>loader</code> ä½¿ç”¨</li><li>ä½¿ç”¨ HappyPack åªå…¼å®¹éƒ¨åˆ†ä¸»æµçš„ <code>loader</code>ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹å®˜æ–¹ç»™å‡ºçš„ <a target="_blank" rel="noopener noreferrer" href="https://github.com/amireh/happypack/wiki/Loader-Compatibility-List">å…¼å®¹æ€§åˆ—è¡¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>é…ç½®ç¤ºä¾‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">HappyPack</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> happyThreadPool </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">HappyPack</span><span class="token punctuation">.</span><span class="token method function property-access maybe-class-name">ThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> size</span><span class="token operator">:</span><span class="token plain"> os</span><span class="token punctuation">.</span><span class="token method function property-access">cpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// çœç•¥å…¶ä½™é…ç½®</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    rules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.less$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// æŠŠå¯¹ .less çš„æ–‡ä»¶å¤„ç†äº¤ç»™ id ä¸º less çš„ HappyPack çš„å®ä¾‹æ‰§è¡Œ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        loader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">ExtractTextPlugin</span><span class="token punctuation">.</span><span class="token method function property-access">extract</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">'style'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">'./node_modules'</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">'happypack/loader'</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">'?id=less'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// æ’é™¤ node_modules ç›®å½•ä¸‹çš„æ–‡ä»¶</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">node_modules</span><span class="token regex regex-delimiter">/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// ç”¨ ID æ¥æ ‡è¯† happupack å¤„ç†ç›¸å…³ loader</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      id</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">'less'</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œ loader çš„é…ç½®ä¸€æ ·</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      loaders</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">'css!less'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// å…±äº«è¿›ç¨‹æ± </span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      threadPool</span><span class="token operator">:</span><span class="token plain"> happyThreadPool</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      cache</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      verbose</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><br><p>è¯´æ˜ï¼š</p><ul><li>åœ¨ <code>loader</code> é…ç½®ä¸­ï¼šæ‰€æœ‰æ–‡ä»¶çš„å¤„ç†éƒ½äº¤ç»™äº† <code>happypack/loader</code> å»å¤„ç†ï¼Œä½¿ç”¨ç´§è·Ÿå…¶åçš„ <code>querystring?id=babel</code> å»å‘Šè¯‰ <code>happypack/loader</code> å»é€‰æ‹©å“ªä¸ª HappyPack å®ä¾‹å»å¤„ç†æ–‡ä»¶ã€‚</li><li>åœ¨ <code>plugin</code> é…ç½®ä¸­ï¼šæ–°å¢äº†ä¸¤ä¸ª HappyPack å®ä¾‹åˆ†åˆ«ç”¨äºå‘Šè¯‰ <code>happypack/loader</code> å»å¦‚ä½•å¤„ç† <code>.js</code> å’Œ <code>.css</code> æ–‡ä»¶ã€‚é€‰é¡¹ä¸­çš„ <code>id</code> å±æ€§çš„å€¼å’Œä¸Šé¢ <code>querystring</code> ä¸­çš„ <code>?id=babel</code> ç›¸å¯¹åº”ï¼Œé€‰é¡¹ä¸­çš„ <code>loaders</code> å±æ€§å’Œ <code>Loader</code> é…ç½®ä¸­ä¸€æ ·ã€‚</li></ul><br></div><img alt="HappyPackç¼–è¯‘è¿è¡Œæµç¨‹å›¾" src="/webpack-guidebook/static/happypack.05c2496e.png" width="800"><div class="markdown"><p>æ›´è¯¦ç»†çš„è¿è¡ŒåŸç†è¯·å‚é˜… <a target="_blank" rel="noopener noreferrer" href="https://fed.taobao.org/blog/taofed/do71ct/happypack-source-code-analysis/">æ·˜å®å‰ç«¯å›¢é˜Ÿï¼šHappyPack åŸç†è§£æ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,a4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>å¦å¤–ï¼Œå½“ä½ çš„é¡¹ç›®ä¸æ˜¯å¾ˆå¤æ‚æ—¶ï¼Œä¸éœ€è¦é…ç½® happypackï¼Œå› ä¸ºè¿›ç¨‹çš„åˆ†é…å’Œç®¡ç†ä¹Ÿéœ€è¦æ—¶é—´ï¼Œå¹¶ä¸èƒ½æœ‰æ•ˆæå‡æ„å»ºé€Ÿåº¦ï¼Œç”šè‡³ä¼šå˜æ…¢ã€‚</p><h2 id="å¤šè¿›ç¨‹å¤šå®ä¾‹å¹¶è¡Œå‹ç¼©ä»£ç "><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#å¤šè¿›ç¨‹å¤šå®ä¾‹å¹¶è¡Œå‹ç¼©ä»£ç "><span class="icon icon-link"></span></a>å¤šè¿›ç¨‹/å¤šå®ä¾‹å¹¶è¡Œå‹ç¼©ä»£ç </h2><p>å¹¶è¡Œå‹ç¼©ä¸»æµæœ‰ä»¥ä¸‹ä¸‰ç§æ–¹æ¡ˆï¼š</p><ul><li><code>terser-webpack-plugin</code> å¼€å¯ <code>parallel</code> å‚æ•° ï¼ˆæ¨èä½¿ç”¨è¿™ä¸ªï¼Œæ”¯æŒ ES6 è¯­æ³•å‹ç¼©ï¼‰</li><li><code>parallel-uglify-plugin</code> æ’ä»¶</li><li><code>uglifyjs-webpack-plugin</code> å¼€å¯ <code>parallel</code> å‚æ•°</li></ul><h3 id="terserwebpackplugin"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#terserwebpackplugin"><span class="icon icon-link"></span></a>TerserWebpackPlugin</h3><p>å‹ç¼©æ˜¯å‘å¸ƒå‰å¤„ç†æœ€è€—æ—¶é—´çš„ä¸€ä¸ªæ­¥éª¤ï¼Œå¦‚æœæ˜¯ä½ æ˜¯åœ¨ Webpack 4 ä¸­ï¼Œåªè¦å‡ è¡Œä»£ç ï¼Œå³å¯åŠ é€Ÿä½ çš„æ„å»ºå‘å¸ƒé€Ÿåº¦ã€‚</p><p><code>terser-webpack-plugin</code> æ˜¯ä¸€ä¸ªä½¿ç”¨ <code>terser</code> å‹ç¼© JS çš„ Webpack æ’ä»¶ã€‚å¼€å¯ <code>parallel</code> å‚æ•°ï¼Œä½¿ç”¨å¤šè¿›ç¨‹å¹¶è¡Œè¿è¡Œæ¥æé«˜æ„å»ºé€Ÿåº¦ã€‚</p><p>é»˜è®¤å¹¶å‘è¿è¡Œæ•°ï¼š<code>os.cpus().length - 1</code></p><blockquote><p>å¹¶è¡ŒåŒ–å¯ä»¥æ˜¾è‘—æé«˜æ„å»ºé€Ÿåº¦ï¼Œå› æ­¤å¼ºçƒˆå»ºè®®ä½¿ç”¨ã€‚</p></blockquote><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">TerserPlugin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  optimization</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    minimizer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// å¤šçº¿ç¨‹</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        parallel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h3 id="paralleluglifyplugin"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#paralleluglifyplugin"><span class="icon icon-link"></span></a>ParallelUglifyPlugin</h3><p>å®ç°åŸç†ï¼šè¿™ä¸ªæ’ä»¶å¯ä»¥å¸®åŠ©å…·æœ‰è®¸å¤šå…¥å£ç‚¹çš„é¡¹ç›®åŠ é€Ÿæ„å»ºã€‚éš Webpack æä¾›çš„ <code>uglify.js</code> æ’ä»¶åœ¨æ¯ä¸ªè¾“å‡ºæ–‡ä»¶ä¸ŠæŒ‰é¡ºåºè¿è¡Œã€‚è¿™ä¸ªæ’ä»¶ä¸æ¯ä¸ªå¯ç”¨ CPU çš„ä¸€ä¸ªçº¿ç¨‹å¹¶è¡Œè¿è¡Œ <code>uglify</code>ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ˜¾è‘—å‡å°‘æ„å»ºæ—¶é—´ï¼Œå› ä¸ºæœ€å°åŒ–æ˜¯ CPU å¯†é›†å‹çš„ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">ParallelUglifyPlugin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-parallel-uglify-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">ParallelUglifyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      uglifyJS</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          beautify</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          comments</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      compress</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        warnings</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        drop_console</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        collapse_vars</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        reduce_vars</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h3 id="uglifyjswebpackplugin"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#uglifyjswebpackplugin"><span class="icon icon-link"></span></a>UglifyJSWebpackPlugin</h3><blockquote><p>âš ï¸ æ³¨æ„ï¼šæ’ä»¶å®˜æ–¹å·²æ¨èä½¿ç”¨ <a href="/webpack-guidebook/best-practice/optimization/multi-process/#TerserWebpackPlugin">TerserWebpackPlugin</a> ä»£æ›¿ã€‚</p></blockquote><p><a target="_blank" rel="noopener noreferrer" href="https://github.com/webpack-contrib/uglifyjs-webpack-plugin">uglifyjs-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> å¼€å¯ <code>parallel</code> å‚æ•°ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token maybe-class-name">UglifyJsPlugin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      uglifyOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        warnings</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        parse</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        compress</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        mangle</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        output</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        toplevel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        nameCache</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        ie8</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        keep_fnames</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      parallel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="å‚è€ƒèµ„æ–™"><a aria-hidden="true" tabindex="-1" href="/webpack-guidebook/best-practice/optimization/multi-process/#å‚è€ƒèµ„æ–™"><span class="icon icon-link"></span></a>å‚è€ƒèµ„æ–™</h2><ul><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/sisterAn/blog/issues/63">ğŸ“ Webpack ç³»åˆ—äºŒï¼šä¼˜åŒ– 90% çš„æ„å»ºé€Ÿåº¦<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://fed.taobao.org/blog/taofed/do71ct/happypack-source-code-analysis/">ğŸ“ æ·˜å®å‰ç«¯å›¢é˜Ÿï¼šHappyPack åŸç†è§£æ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a target="_blank" rel="noopener noreferrer" href="https://segmentfault.com/a/1190000021037299">ğŸ“ HappyPack åŸç†è§£æ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><div class="__dumi-default-layout-footer-meta"></div></div>
